<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="Pantillas/loginTemplate.xhtml">

    <ui:define name = "content">  

        <p:growl id="mensajes" sticky="true" showDetail="true" life="3000" />
        <h:form id="formLogin">

                    
                <p:graphicImage id="logo" style="display: block; margin-left: auto;margin-right: auto;" value="resources/img/logo-invoice.png" />             

                <p:spacer height="30px;"/>
                <p:growl id="growl1" showDetail="true" />
                <p:spacer height="30px;"/>
                <p:panel id="basic" header="Login"  footer="Aplicaciones Distribuidas" widgetVar="dlg"
                         style="width: 350px; opacity: 0.9; "
                         styleClass="center_inline center_block no_border"
                         >                       
                    <h:panelGrid columns="2" cellpadding="5" >

                        <p:outputLabel for="username" value="Usuario:" />
                        <p:inputText id="username" value="#{loginBean.nombre}" required="true" requiredMessage="Usuario requerido"
                                     label="username" placeholder="Ingrese su Usuario"  style="width: 90%;"/>

                        <p:outputLabel for="password" value="Contraseña:    " />
                        <p:password id="password" value="#{loginBean.clave}" required="true" requiredMessage="Clave requerida"
                                    label="password" placeholder="Ingrese su Clave" style="width: 90%;"/>
                        
                        <f:facet name="footer">
                            <p:commandButton value="Iniciar Sesión" action="#{loginBean.login(actionEvent)}"
                                             icon="fa fa-sign-in" update=":mensajes"
                                             oncomplete="manejarLogin(xhr, status, args)"
                                             style="margin: 5px;color: white; background: #0071BB;"/>
                        </f:facet>  
                    </h:panelGrid>
                    
                </p:panel>
            
        </h:form>
        <script type="text/javascript">
            //<![CDATA[
            function manejarLogin(xhr, status, args) {
                if (!args.validationFailed && args.estaLogeado) {
                    setTimeout(function () {
                        window.location = args.view;
                    }, 500);
                }
            }
            //]]>
        </script>
    </ui:define>   
</ui:composition>
